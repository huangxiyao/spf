<body>
This package provides the database access utility classes.
<p>
	For single database queries or updates (single means not groupped into a database transaction)
	use <tt>DB</tt> class helper methods: <tt>query</tt>, <tt>queryForObject</tt> and <tt>update</tt>.
</p>
<p>
	For <tt>DB#query</tt> methods you need to provide a <tt>RowMapper</tt>. The implementation of
	this interface are responsible for mapping a single result set row into an object. The following
	example shows how to map a result set into a list of Person objects:
	<pre>
		RowMapper personMapper = new RowMapper() {
		 	public Object mapRow(ResultSet row, int rowNum) throws SQLException {
		     	return new Person(row.getString("first_name"), row.getString("last_name"));
			}
		}
		List listOfPersonObjects = DB.query("select first_name, last_name from person", personMapper);
	</pre>
	Note that the mapper can be implemented either as an inner class (as in the above example) or
	as a standalone class.
	There exists also 2 convenient mapper implementations. <tt>RowToListMapper</tt> maps each query
	result row into a list. <tt>RowToMapMapper</tt> maps each query result into a map with keys
	corresponding to query column names.
</p>
<p>
	If you need to execute several SQL statements in a transaction you have to create implemenations
	of <tt>DatabaseTransaction</tt> object, and more precisely implement <tt>doInTransaction</tt>
	method. The following example show how to do this:
	<pre>
		import java.sql.Types;
		...
		final int moneyToTransfer = 100;
		final String srcAccountId = "a100";
		final String destAccountId = "a200";
		DatabaseTransaction tx = new DatabaseTrasaction() {
		 	protected Object doInTransaction() throws Exception {
				int updated =
					update("update account set value = value - ? where acc_id = ?",
						new Object[] {new Integer(moneyToTransfer), srcAccountId},
						new int[] {Types.INTERGER, Types.VARCHAR});
				if (updated == 1) {
		         	updated = update("update account set value = value + ? where acc_id = ?",
						new Object[] {new Integer(moneyToTransfer}, descAccountId},
						new int[] {Types.INTEGER, TYPES.VARCHAR});
					if (updated == 0) {
		             	throw new AccountException("Account with not found; id: " + destAccountId);
		            }
					if (updated > 1) {
						throw new AccountException("Only one account should updated; attempted to udpate: " + updated);
					}
				}
				else {
		         	throw new AccountException("Only one source account should be updated; attempted to update: " + updated);
				}
				// this transaction does not return any result - just return null
				return null;
			}
		}
		tx.execute();
	</pre>
	If <tt>doInTransaction</tt> method throws any exception, the entire transaction will be automatically
	rolled back. If no exception is thrown, the transaction will be automatically commited.
	Note, that the DataTransaction may be implemented as an inner class (as above) or as a standalone
	class.
</p>
</body>
